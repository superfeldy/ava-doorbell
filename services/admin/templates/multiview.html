<!DOCTYPE html>
<html lang="en" class="multiview">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <title>AVA Doorbell - Live View</title>
    <link rel="stylesheet" href="/static/css/common.css?v=4.10">
    <link rel="stylesheet" href="/static/css/multiview.css?v=4.10">
</head>
<body>
    <div id="viewport"></div>

    <div id="controls" class="hidden">
        <button class="control-btn" id="btn-layout" title="Cycle Layout">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M3 3h8v8H3V3zm10 0h8v8h-8V3zM3 13h8v8H3v-8zm10 0h8v8h-8v-8z"/>
            </svg>
        </button>
        <button class="control-btn" id="btn-mute" title="Toggle Audio">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0014 8.5v7a4.5 4.5 0 002.5-3.5zM14 3.23v2.06a6.5 6.5 0 010 13.42v2.06A8.5 8.5 0 0014 3.23z"/>
            </svg>
        </button>
        <button class="control-btn" id="btn-talk" title="Push to Talk">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1-9c0-.55.45-1 1-1s1 .45 1 1v6c0 .55-.45 1-1 1s-1-.45-1-1V5zm6 6c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
            </svg>
        </button>
        <button class="control-btn" id="btn-refresh" title="Refresh Streams">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M17.65 6.35A8 8 0 1012 4V1L8 5l4 4V6a6 6 0 11-1.35 11.65l-1.42 1.42A8 8 0 0017.65 6.35z"/>
            </svg>
        </button>
    </div>

    <div class="cycle-indicator" id="cycle-indicator">
        <span>Auto</span>
        <div class="cycle-progress"><div class="cycle-progress-bar" id="cycle-progress"></div></div>
    </div>

    {% if mode == "mjpeg" %}
    {# Android WebView / MediaTek: skip MSE/WebRTC entirely to avoid MediaCodec crashes #}
    <script type="module" src="/static/js/multiview/main-mjpeg.js?v=4.10"></script>
    {% else %}
    <script type="module" src="/static/js/multiview/main.js?v=4.10"></script>
    {% endif %}
</body>
</html>
